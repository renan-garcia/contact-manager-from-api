{"version":3,"sources":["app.js","contact-create.js","contact-detail.js","contact-list.js","environment.js","main.js","messages.js","no-selection.js","utility.js","web-api.js","resources/index.js","resources/elements/loading-indicator.js"],"names":["App","inject","api","configureRouter","config","router","title","map","route","moduleId","name","ContactCreate","ea","theRouter","activate","params","routeConfig","getContactForCreate","then","contact","navModel","setTitle","originalContact","JSON","parse","stringify","publish","create","createContact","canDeactivate","result","confirm","firstName","lastName","isRequesting","ContactDetail","getContactDetails","id","save","saveContact","ContactList","Router","contacts","getContactList","subscribe","select","msg","found","find","x","Object","assign","jQuery","extend","push","created","selectedId","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","ContactUpdated","ContactViewed","ContactCreated","NoSelection","message","areEqual","obj1","obj2","keys","every","key","hasOwnProperty","client","latency","getId","WebAPI","resolve","reject","fetch","response","json","results","email","phoneNumber","catch","ex","console","log","data","FormData","append","method","mode","body","headers","Headers","globalResources","nprogress","LoadingIndicator","defaultValue","on","loadingChanged","newValue","done"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {WebAPI} from './web-api';\n\nexport class App {\n  static inject() { return [WebAPI]; }\n\n  constructor(api) {\n    this.api = api;\n  }\n\n  configureRouter(config, router) {\n    config.title = 'Contacts';\n    config.map([\n      { route: '',              moduleId: 'no-selection', name:'select', title: 'Select'},\n      { route: 'contacts/:id',  moduleId: 'contact-detail', name:'contacts' },\n      { route: '',  moduleId: 'contact-create', name:'create' }\n    ]);\n\n    this.router = router;\n  }\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {WebAPI} from './web-api';\nimport {Router} from 'aurelia-router';\nimport {ContactUpdated,ContactViewed,ContactCreated} from './messages';\nimport {areEqual} from './utility';\n\nexport class ContactCreate {\n  static inject = [WebAPI, EventAggregator];\n  static inject() { return [Router]; }\n\n  constructor(api, ea, router) {\n    this.theRouter = router;\n    this.api = api;\n    this.ea = ea;\n  }\n\n  activate(params, routeConfig) {\n    this.routeConfig = routeConfig;\n    this.routeConfig = routeConfig;\n\n    return this.api.getContactForCreate().then(contact => {\n      this.contact = contact;\n      this.routeConfig.navModel.setTitle(\"Create contact\");\n      this.originalContact = JSON.parse(JSON.stringify(contact));\n      this.ea.publish(new ContactViewed(this.contact));\n    });\n  }\n\n  get canSave() {\n    return this.contact.firstName && this.contact.lastName && !this.api.isRequesting;\n  }\n\n  create() {\n    this.api.createContact(this.contact).then(contact => {\n      this.contact = contact;\n      this.ea.publish(new ContactCreated(this.contact));\n    });\n  }\n\n  canDeactivate() {\n    if (!areEqual(this.originalContact, this.contact)) {\n      let result = confirm('You have unsaved changes. Are you sure you wish to leave?');\n\n      if (!result) {\n        this.ea.publish(new ContactViewed(this.contact));\n      }\n\n      return result;\n    }\n\n    return true;\n  }\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {WebAPI} from './web-api';\nimport {ContactUpdated,ContactViewed} from './messages';\nimport {areEqual} from './utility';\n\nexport class ContactDetail {\n  static inject = [WebAPI, EventAggregator];\n\n  constructor(api, ea){\n    this.api = api;\n    this.ea = ea;\n  }\n\n  activate(params, routeConfig) {\n    this.routeConfig = routeConfig;\n\n    return this.api.getContactDetails(params.id).then(contact => {\n      this.contact = contact;\n      this.routeConfig.navModel.setTitle(contact.firstName);\n      this.originalContact = JSON.parse(JSON.stringify(contact));\n      this.ea.publish(new ContactViewed(this.contact));\n    });\n  }\n\n  get canSave() {\n    return this.contact.firstName && this.contact.lastName && !this.api.isRequesting;\n  }\n\n  save() {\n    this.api.saveContact(this.contact).then(contact => {\n      this.contact = contact;\n      this.routeConfig.navModel.setTitle(contact.firstName);\n      this.originalContact = JSON.parse(JSON.stringify(contact));\n      this.ea.publish(new ContactUpdated(this.contact));\n    });\n  }\n\n  canDeactivate() {\n    if(!areEqual(this.originalContact, this.contact)){\n      let result = confirm('You have unsaved changes. Are you sure you wish to leave?');\n\n      if(!result) {\n        this.ea.publish(new ContactViewed(this.contact));\n      }\n\n      return result;\n    }\n\n    return true;\n  }\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport {WebAPI} from './web-api';\nimport {ContactUpdated, ContactViewed, ContactCreated} from './messages';\n\nexport class ContactList {\n  static inject = [WebAPI, EventAggregator];\n  static inject() { return [Router]; }\n  constructor(api, ea) {\n    this.api = api;\n    this.contacts = [];\n    this.api.getContactList().then(contacts => this.contacts = contacts);\n    ea.subscribe(ContactViewed, msg => this.select(msg.contact));\n    ea.subscribe(ContactUpdated, msg => {\n      let id = msg.contact.id;\n      let found = this.contacts.find(x => x.id === id);\n      Object.assign(found, msg.contact);\n    });\n    ea.subscribe(ContactCreated, msg => {\n      let contact = jQuery.extend({}, msg.contact)\n      this.contacts.push(contact);\n    });\n  }\n\n  created() {\n    this.api.getContactList().then(contacts => this.contacts = contacts);\n  }\n\n  select(contact) {\n    this.selectedId = contact.id;\n    return true;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export class ContactUpdated {\n  constructor(contact) {\n    this.contact = contact;\n  }\n}\n\nexport class ContactViewed {\n  constructor(contact) {\n    this.contact = contact;\n  }\n}\n\nexport class ContactCreated {\n  constructor(contact) {\n    this.contact = contact;\n  }\n}\n","export class NoSelection {\n  constructor() {\n    this.message = \"Please Select a Contact.\";\n  }\n}\n","export function areEqual(obj1, obj2) {\n\treturn Object.keys(obj1).every((key) => obj2.hasOwnProperty(key) && (obj1[key] === obj2[key]));\n};","import {HttpClient} from 'aurelia-fetch-client';\nlet client = new HttpClient();\nlet latency = 200;\nlet id = 0;\nlet contacts = [];\n\nfunction getId() {\n  return ++id;\n}\n\nexport class WebAPI {\n  isRequesting = false;\n\n  getContactList() {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      client.fetch('http://localhost:3000/contacts')\n        .then(response => response.json())\n        .then(response => {\n          let results = response.map(x => {\n            return {\n              id: x.id,\n              firstName: x.firstName,\n              lastName: x.lastName,\n              email: x.email,\n              phoneNumber: x.phoneNumber\n            }\n          });\n          resolve(results);\n          this.isRequesting = false;\n        })\n        .catch((ex) => {\n          console.log('ERROR', ex);\n          reject(response);\n        });\n    });\n  }\n  getContactForCreate() {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n          let result = {\n            firstName: \"\",\n            lastName: \"\",\n            email: \"\",\n            phoneNumber: \"\"\n          };\n          resolve(result);\n          this.isRequesting = false;\n        })\n        .catch((ex) => {\n          console.log('ERROR', ex);\n          reject(response);\n        });\n  }\n\n  getContactDetails(id) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      client.fetch('http://localhost:3000/contacts/' + id)\n        .then(response => response.json())\n        .then(response => {\n          let result = {\n            id: response.id,\n            firstName: response.firstName,\n            lastName: response.lastName,\n            email: response.email,\n            phoneNumber: response.phoneNumber\n          };\n          resolve(result);\n          this.isRequesting = false;\n        })\n        .catch((ex) => {\n          console.log('ERROR', ex);\n          reject(response);\n        });\n    });\n  }\n  createContact(contact) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      var data = new FormData();\n      data.append(JSON.stringify(contact));\n      client.fetch('http://localhost:3000/contacts/', {\n          method: 'POST',\n          mode: 'no-cors',\n          body: JSON.stringify({\n            contact\n          }),\n          headers: new Headers({\n            'Content-Type': 'application/json'\n          })\n        })\n        .then(response => response.json())\n        .then(response => {\n          console.log(response);\n          let result = {\n            id: response.id,\n            firstName: response.firstName,\n            lastName: response.lastName,\n            email: response.email,\n            phoneNumber: response.phoneNumber\n          };\n          resolve(result);\n          this.isRequesting = false;\n        })\n        .catch((ex) => {\n          console.log('ERROR', ex);\n          reject(response);\n        });\n    });\n  }\n\n  saveContact(contact) {\n    this.isRequesting = true;\n    return new Promise((resolve, reject) => {\n      var data = new FormData();\n      data.append(JSON.stringify(contact));\n      client.fetch('http://localhost:3000/contacts/' + contact.id, {\n          method: 'PUT',\n          mode: 'cors',\n          body: JSON.stringify({\n            contact\n          }),\n          headers: new Headers({\n            'Content-Type': 'application/json'\n          })\n        })\n        .then(response => response.json())\n        .then(response => {\n          console.log(response);\n          let result = {\n            id: response.id,\n            firstName: response.firstName,\n            lastName: response.lastName,\n            email: response.email,\n            phoneNumber: response.phoneNumber\n          };\n          resolve(result);\n          this.isRequesting = false;\n        })\n        .catch((ex) => {\n          console.log('ERROR', ex);\n          reject(response);\n        });\n    });\n  }\n}\n","export function configure(config) {\n  config.globalResources(['./elements/loading-indicator']);\n}\n","import * as nprogress from 'nprogress';\nimport {bindable, noView, decorators} from 'aurelia-framework';\n\nexport let LoadingIndicator = decorators(\n  noView(['nprogress/nprogress.css']),\n  bindable({name: 'loading', defaultValue: false})\n).on(class {\n  loadingChanged(newValue) {\n    if (newValue) {\n      nprogress.start();\n    } else {\n      nprogress.done();\n    }\n  }\n});\n"],"sourceRoot":"../src"}